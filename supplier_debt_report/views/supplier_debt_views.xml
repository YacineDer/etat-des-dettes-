<?xml version="1.0" encoding="UTF-8"?>
<odoo>

<!-- Vue Liste -->
<record id="view_supplier_debt_list" model="ir.ui.view">
    <field name="name">supplier.debt.list</field>
    <field name="model">supplier.debt.report</field>
    <field name="arch" type="xml">
        <list string="Dettes Fournisseurs">
            <field name="partner_id" string="Fournisseur"/>
            <field name="total_invoice" string="Total Facturé" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            <field name="total_paid" string="Total Payé" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            <field name="total_due" string="Reste" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            <field name="payment_status" widget="badge" string="Statut de Paiement"/>
        </list>
    </field>
</record>

<!-- Vue Formulaire avec Onglets -->
<record id="view_supplier_debt_form" model="ir.ui.view">
    <field name="name">supplier.debt.form</field>
    <field name="model">supplier.debt.report</field>
    <field name="arch" type="xml">
        <form string="Détails des Dettes Fournisseurs">
            <sheet>
                <group>
                    <field name="partner_id" readonly="1" string="Fournisseur"/>
                    <field name="total_invoice" string="Total Facturé" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="total_paid" string="Total Payé" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="total_due" string="Reste" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                </group>
                <notebook>
                    <!-- Onglet Factures (Account.Move) -->
                    <page string="Factures">
                        <field name="bill_lines" mode="list,kanban">
                            <list>
                                <field name="name" string="Référence"/>
                                <field name="invoice_date" string="Date de Facture"/>
                                <field name="amount_total" string="Montant Total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="amount_residual" string="Montant Résiduel" widget="monetary" options="{'currency_field': 'currency_id'}"/>

                            </list>
                        </field>
                    </page>

                    <!-- Onglet Paiements (Account.Payment) -->
                    <page string="Paiements">
                        <field name="payment_lines" mode="list,kanban">
                            <list>
                                <field name="name" string="Référence"/>
                                <field name="date" string="Date de Paiement"/>
                                <field name="amount" string="Montant" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="state" string="Statut"/>
                            </list>
                        </field>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>

<!-- Action -->
<record id="action_supplier_debt" model="ir.actions.act_window">
    <field name="name">Rapport des Dettes Fournisseurs</field>
    <field name="res_model">supplier.debt.report</field>
    <field name="view_mode">list,form</field>
    <field name="context">{'search_default_group_by_partner': 1}</field>
</record>

</odoo>
